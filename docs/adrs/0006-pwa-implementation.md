# 6. PWA実装の検討

Date: 2024-03-26

## ステータス

提案

## 文脈

- モバイルでの利用が主要なユースケース
- オフライン時のアクセスが有用な可能性
- ネイティブアプリに近い体験の提供を検討

## 検討項目

### 1. Service Worker実装方法

#### Workbox
- 長所
  - Google製の成熟したライブラリ
  - 豊富な機能と柔軟なキャッシュ戦略
  - TypeScriptサポート
- 短所
  - 学習コストがある
  - バンドルサイズへの影響

#### 独自実装
- 長所
  - 必要最小限の機能に絞れる
  - バンドルサイズの最適化
- 短所
  - 実装コストが高い
  - メンテナンスの負担

### 2. オフライン対応範囲

#### フル対応
- 長所
  - 完全なオフライン体験
  - ネイティブアプリに近い使用感
- 短所
  - 実装が複雑
  - データ同期の考慮が必要

#### 部分対応
- 長所
  - 実装が比較的シンプル
  - 重要な機能のみをオフライン化
- 短所
  - 一部機能が制限される

## 決定

以下の方針で実装することを推奨します：

1. **Service Worker**: Workboxを採用
   - 理由：実装コストの削減と信頼性の確保

2. **オフライン対応範囲**: 部分対応
   - 対応する機能：
     - 過去に撮影した画像の表示
     - 基本的なUIコンポーネント
     - 最新のデータのキャッシュ
   - 制限される機能：
     - 新規画像のアップロード
     - リアルタイムな更新

## 影響

### 良い影響
- モバイルでの使用体験の向上
- オフライン時の基本機能の利用が可能
- インストール可能なアプリとして提供可能

### 考慮すべき点
- キャッシュ戦略の設計
- オフライン時のUXデザイン
- データ同期の仕組み
- ストレージ容量の管理
- バージョン管理とアップデート方法 
